function AddItemToOrder(r){$("#buy-button-price-"+r).removeClass("pulse"),$("#buy-button-msg-"+r).html('<i class="fa fa-spinner fa-spin"></i>');var e="api.order.php",a=1;$.ajax({url:e,cache:!1,dataType:"json",type:"POST",data:{calling:"Order",action:"AddToOrder",amount:a,product_id:r},error:function(){console.log("Request Error")}}).done(function(e){console.log("Return: "+e.message+","+e.return),$("#buy-button-msg-"+r).html('<i class="fa fa-check"></i>'),$("#buy-button-price-"+r).html("Checkout"),$("#buy-button-msg-"+r).addClass("pulse"),e.message?MyCurrentOrder():window.location="order_detail.php?id="+e.return}).error()}function EditItemInOrder(r,e){var a="api.order.php",o=$("#product-quantity-"+r+e).val(),t=$("#paying-button");$.ajax({url:a,cache:!1,dataType:"json",type:"POST",data:{calling:"Order",action:"EditInOrder",amount:o,order_id:r,product_id:e},error:function(){console.log("Request Error")}}).done(function(a){console.log("Message: "+a.message+" Return:"+a.return),a.return?($("#product-quantity-"+r+e).removeClass("fail"),t.show()):($("#product-quantity-"+r+e).addClass("fail"),t.hide(),ToggleAlert('<i class="fa fa-quote-left"></i>สินค้าไม่พอ!<i class="fa fa-quote-right"></i>'))}).error()}function RemoveItemInOrder(r,e){var a="api.order.php";$.ajax({url:a,cache:!1,dataType:"json",type:"POST",data:{calling:"Order",action:"RemoveInOrder",order_id:r,product_id:e},error:function(){console.log("Request Error")}}).done(function(r){console.log("Return: "+r.message),$("#items-in-order-"+e).slideUp(),MyCurrentOrder()}).error()}function OrderProcess(r,e){var a="api.order.php",o=$("#shipping_type").val();$("#dialog-box").fadeIn(300),$.ajax({url:a,cache:!1,dataType:"json",type:"POST",data:{calling:"Order",action:"OrderProcess",order_id:r,order_action:e,order_shipping_type:o},error:function(){console.log("Request Error")}}).done(function(r){console.log(r.message),location.reload()}).error()}function MyCurrentOrder(){var r="api.order.php";$("#my-cart").removeClass("pulse"),$.ajax({url:r,cache:!1,dataType:"json",type:"GET",data:{calling:"Order",action:"MyCurrentOrder"},error:function(){console.log("Request Error")}}).done(function(r){var e=numeral(r.data.payments).format("0,0.00");$("#my-cart").addClass("pulse"),$("#amount").html(r.data.amount),$("#payments").html(e+" ฿"),r.data.payments>0?$("#my-cart i").addClass("animated infinite pulse"):$("#my-cart i").removeClass("animated infinite pulse")}).error()}