function AddCart(r){var r=$("#product_id").val(),e=$("#subproduct_id").val();e&&(r=e);var o="api.order.php",a=1;$.ajax({url:o,cache:!1,dataType:"json",type:"POST",data:{calling:"Order",action:"AddToOrder",amount:a,product_id:r},error:function(){console.log("Request Error")}}).done(function(r){console.log("Return: "+r.message+","+r.return),$("#buy-button").html('ชำระเงินตอนนี้<i class="fa fa-arrow-right"></i>').addClass("buy-btn-active"),r.message?MyCurrentOrder():window.location="order-"+r.return+".html"}).error()}function EditItemInOrder(r,e){var o="api.order.php",a=$("#product-quantity-"+r+e).val(),n=$("#paying-button");$.ajax({url:o,cache:!1,dataType:"json",type:"POST",data:{calling:"Order",action:"EditInOrder",amount:a,order_id:r,product_id:e},error:function(){console.log("Request Error")}}).done(function(o){console.log("Message: "+o.message+" Return:"+o.return),o.return?($("#product-quantity-"+r+e).removeClass("fail"),n.show()):($("#product-quantity-"+r+e).addClass("fail"),n.hide())}).error()}function RemoveItemInOrder(r,e){var o="api.order.php",a=confirm("คุณต้องการลบสินค้าออกจากตะกร้าใช่หรือไม่?");return a?($.ajax({url:o,cache:!1,dataType:"json",type:"POST",data:{calling:"Order",action:"RemoveInOrder",order_id:r,product_id:e},error:function(){console.log("Request Error")}}).done(function(r){console.log("Return: "+r.message),$("#items-in-order-"+e).remove(),MyCurrentOrder(),SummaryPayments()}).error(),void 0):!1}function OrderProcess(r,e){var o="api.order.php",a=$("#shipping_type").val();$("#dialog-message").html("กำลังส่งคำสั่งซื้อ่..."),$("#dialog-box").fadeIn(300),console.log("OrderProcess() with "+r+","+e),$.ajax({url:o,cache:!1,dataType:"json",type:"POST",data:{calling:"Order",action:"OrderProcess",order_id:r,order_action:e,order_shipping_type:a},error:function(){console.log("Request Error")}}).done(function(r){console.log(r.message),location.reload()}).error()}function MyCurrentOrder(){var r="api.order.php";$("#my-cart").removeClass("pulse"),$.ajax({url:r,cache:!1,dataType:"json",type:"GET",data:{calling:"Order",action:"MyCurrentOrder"},error:function(){console.log("Request Error")}}).done(function(r){var e=numeral(r.data.payments).format("0,0.00");$("#my-cart").addClass("pulse"),$("#amount").html(r.data.amount),$("#payments").html(e+" ฿"),r.data.payments>0?$("#my-cart i").addClass("animated infinite pulse"):$("#my-cart i").removeClass("animated infinite pulse")}).error()}function EditAddress(r){var e="api.order.php",o=$("#customer_name").val(),a=$("#customer_address").val(),n=$("#customer_phone").val();$("#dialog-message").html("กำลังบันทึก..."),$("#dialog-box").fadeIn(300),$.ajax({url:e,cache:!1,dataType:"json",type:"POST",data:{calling:"Order",action:"EditAddress",order_id:r,realname:o,address:a,phone:n},error:function(){console.log("Request Error")}}).done(function(e){console.log("Message: "+e.message+" Return:"+e.return),setTimeout(function(){window.location="order-"+r+".html"},300)}).error()}function CencelTransfer(r){var e="api.order.php";$("#dialog-message").html("กำลังยกเลิกการโอนเงิน..."),$("#dialog-box").fadeIn(300),$.ajax({url:e,cache:!1,dataType:"json",type:"POST",data:{calling:"Order",action:"CancelTransfer",order_id:r},error:function(){console.log("Request Error")}}).done(function(e){console.log("Message: "+e.message+" Return:"+e.return),setTimeout(function(){window.location="order-"+r+".html"},300)}).error()}